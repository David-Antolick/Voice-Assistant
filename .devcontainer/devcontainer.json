// For format details, see https://aka.ms/devcontainer.json. For config options, see the
// README at: https://github.com/devcontainers/templates/tree/main/src/ubuntu
{
	"name": "Ubuntu",
	// Or use a Dockerfile or Docker Compose file. More info: https://containers.dev/guide/dockerfile
	"image": "mcr.microsoft.com/devcontainers/base:jammy",
	"features": {
		"ghcr.io/devcontainers/features/common-utils:2": {},
		"ghcr.io/devcontainers/features/git:1": {},
		"ghcr.io/devcontainers/features/nvidia-cuda:1": {},
		"ghcr.io/devcontainers/features/python:1": {
			"version": "3.12"
		}
	},

	"runArgs": ["--gpus", "all"],


	"containerEnv": {
    "TORCH_CPP_LOG_LEVEL": "ERROR",  // silence NNPACK warnings
    "CT2_DISABLE_CUDNN": "1"         // force CTranslate2 â†’ cuBLAS only
  	},

	"postCreateCommand": "sudo apt-get update && sudo apt-get install -y --no-install-recommends libportaudio2 portaudio19-dev ffmpeg && sudo rm -rf /var/lib/apt/lists/* && pip install -r requirements.txt"
}

